# atoken-wrapper-deployer
[![npm](https://img.shields.io/npm/v/@safe-global/safe-apps-provider)](https://www.npmjs.com/package/@safe-global/safe-apps-provider)

This repo provides easy to use scripts for deploying multiple Aave V3 aToken wrappers on Avalanche C-Chain using batched transactions via a Safe multisig wallet.

## Repository Setup 

### Install dependencies
```bash
yarn install
```

### Create .env file
A sample .env file is provided in the repo. Copy it and fill in the values.
```bash
AVALANCHE_URL=
PRIVATE_KEY=
ETHERSCAN_API_KEY=
```

### Add tokens to be deployed
Within `helpers/tokenRegistry` is a list of tokens to be deployed. Edit this list if these tokens need to be changed.

## Available Scripts

### `GenerateAvaxDeployMetadata`
This script generates the metadata for the Avax deployment. This metadata is used by the Safe multisig wallet to execute a batch transaction to deploy the aToken wrappers.

This scripted should be run before `batchDeployment` on a forked network and will generate a file called `aave_v3_wrapper_output.json` in the `txFiles` directory.

```bash
yarn hardhat run scripts/GenerateAvaxDeployMetadata.ts --network hardhat
```

### `BatchDeployment`
This script deploys the aToken wrappers to the Avalanche C-Chain using a Safe multisig wallet. The script will read the `aave_v3_wrapper_output.json` file generated by `GenerateAvaxDeployMetadata` and deploy the aToken wrappers.

```bash
yarn hardhat run scripts/BatchDeployment.ts --network hardhat
```





